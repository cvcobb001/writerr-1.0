"use strict";var x=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var S=(u,t)=>{for(var e in t)x(u,e,{get:t[e],enumerable:!0})},T=(u,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of k(t))!A.call(u,n)&&n!==e&&x(u,n,{get:()=>t[n],enumerable:!(i=C(t,n))||i.enumerable});return u};var P=u=>T(x({},"__esModule",{value:!0}),u);var B={};S(B,{default:()=>y});module.exports=P(B);var a=require("obsidian");var m=require("obsidian"),p=class extends m.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"AI Editorial Functions Settings"}),new m.Setting(t).setName("Current writing mode").setDesc("Choose the active writing mode for context-aware functions").addDropdown(r=>r.addOption("general","General Writing").addOption("academic","Academic Writing").addOption("business","Business Writing").addOption("fiction","Fiction Writing").addOption("technical","Technical Writing").setValue(this.plugin.settings.currentMode).onChange(async d=>{this.plugin.settings.currentMode=d,await this.plugin.saveSettings()})),t.createEl("h3",{text:"Interface"}),new m.Setting(t).setName("Enable quick access").setDesc("Add editorial functions to the context menu when text is selected").addToggle(r=>r.setValue(this.plugin.settings.enableQuickAccess).onChange(async d=>{this.plugin.settings.enableQuickAccess=d,await this.plugin.saveSettings()})),new m.Setting(t).setName("Show category icons").setDesc("Display category icons in function menus").addToggle(r=>r.setValue(this.plugin.settings.showCategoryIcons).onChange(async d=>{this.plugin.settings.showCategoryIcons=d,await this.plugin.saveSettings()})),new m.Setting(t).setName("Confirm before applying").setDesc("Show a preview before applying editorial changes").addToggle(r=>r.setValue(this.plugin.settings.confirmBeforeApply).onChange(async d=>{this.plugin.settings.confirmBeforeApply=d,await this.plugin.saveSettings()})),new m.Setting(t).setName("Auto-apply formatting").setDesc("Automatically apply basic formatting fixes (punctuation, spacing)").addToggle(r=>r.setValue(this.plugin.settings.autoApplyFormatting).onChange(async d=>{this.plugin.settings.autoApplyFormatting=d,await this.plugin.saveSettings()})),t.createEl("h3",{text:"Available Functions by Category"});let e=[{name:"Academic",key:"academic",functions:["Argument Structure Analysis","Citation Formatting","Thesis Statement Enhancement","Academic Tone Adjustment","Literature Review Synthesis"]},{name:"Business",key:"business",functions:["Executive Summary Creation","Professional Tone Enhancement","Action Item Extraction","Meeting Notes Formatting","Proposal Structure"]},{name:"Fiction",key:"fiction",functions:["Dialogue Enhancement","Character Development","Narrative Flow Improvement","Setting Description","Pacing Analysis"]},{name:"Technical",key:"technical",functions:["API Documentation","Code Comment Enhancement","Technical Specification","Troubleshooting Guide","User Manual Creation"]}];for(let r of e){let d=t.createEl("div",{cls:"function-category-info"});d.style.cssText=`
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      `,d.createEl("h4",{text:r.name});let M=d.createEl("ul");M.style.cssText=`
        margin: 8px 0 0 20px;
        color: var(--text-muted);
      `;for(let I of r.functions)M.createEl("li",{text:I})}t.createEl("h3",{text:"Custom Functions"});let i=t.createEl("div",{cls:"setting-note"});i.style.cssText=`
      padding: 10px;
      background: var(--background-modifier-form-field);
      border-radius: 4px;
      font-style: italic;
      color: var(--text-muted);
    `,i.textContent="Custom function creation will be available in a future update. Stay tuned!",t.createEl("h3",{text:"Usage Tips"});let n=t.createEl("div",{cls:"usage-tips"});n.style.cssText=`
      background: var(--background-secondary);
      padding: 15px;
      border-radius: 6px;
      margin: 10px 0;
    `;let o=["Select text and right-click to access quick editorial functions",'Use Ctrl/Cmd + P to search for "editorial" commands',"Switch writing modes to get context-appropriate suggestions","The status bar shows your current writing mode","Use the ribbon icon to access all available functions"],c=n.createEl("ul");for(let r of o)c.createEl("li",{text:r});t.createEl("h3",{text:"Keyboard Shortcuts"});let s=t.createEl("div",{cls:"keyboard-shortcuts"});s.style.cssText=`
      background: var(--background-secondary);
      padding: 15px;
      border-radius: 6px;
      margin: 10px 0;
    `;let l=[{command:"Quick edit selection",shortcut:"Set in Hotkeys settings"},{command:"Show function menu",shortcut:"Set in Hotkeys settings"},{command:"Improve clarity",shortcut:"Set in Hotkeys settings"},{command:"Fix grammar",shortcut:"Set in Hotkeys settings"}],g=s.createEl("table");g.style.cssText=`
      width: 100%;
      border-collapse: collapse;
    `;let E=g.createEl("tr");E.createEl("th",{text:"Command"}).style.cssText="text-align: left; padding: 8px; border-bottom: 1px solid var(--background-modifier-border);",E.createEl("th",{text:"Shortcut"}).style.cssText="text-align: left; padding: 8px; border-bottom: 1px solid var(--background-modifier-border);";for(let r of l){let d=g.createEl("tr");d.createEl("td",{text:r.command}).style.cssText="padding: 6px 8px;",d.createEl("td",{text:r.shortcut}).style.cssText="padding: 6px 8px; color: var(--text-muted); font-style: italic;"}let F=s.createEl("p",{text:'Go to Settings \u2192 Hotkeys and search for "AI Editorial" to set custom keyboard shortcuts.'});F.style.cssText="margin-top: 10px; font-size: 0.9em; color: var(--text-muted);"}};var h=class{constructor(t){this.plugin=t,this.initializeBuiltInFunctions()}initializeBuiltInFunctions(){this.builtInFunctions=[{id:"improve-argument-structure",name:"Improve Argument Structure",description:"Analyze and enhance the logical flow and structure of academic arguments",category:"academic",prompt:"Analyze the argument structure in this text and improve its logical flow, clarity, and persuasiveness. Maintain academic tone and add transitions where needed:"},{id:"enhance-citation-format",name:"Enhance Citations",description:"Improve citation formatting and integration within academic text",category:"academic",prompt:"Review and improve the citation formatting and integration in this text. Ensure proper academic style and smooth integration with the surrounding text:"},{id:"strengthen-thesis",name:"Strengthen Thesis",description:"Enhance thesis statement clarity, specificity, and argumentative power",category:"academic",prompt:"Strengthen this thesis statement by making it more specific, clear, and arguable. Ensure it clearly states the main argument and previews supporting points:"},{id:"academic-tone-adjustment",name:"Academic Tone Adjustment",description:"Adjust text to match appropriate academic tone and style",category:"academic",prompt:"Adjust this text to match appropriate academic tone and style. Make it more formal, precise, and scholarly while maintaining readability:"},{id:"create-executive-summary",name:"Create Executive Summary",description:"Generate a concise executive summary from detailed business content",category:"business",prompt:"Create a concise executive summary from this content. Focus on key points, decisions, and action items that executives need to know:"},{id:"enhance-professional-tone",name:"Enhance Professional Tone",description:"Improve professional tone and business communication style",category:"business",prompt:"Enhance the professional tone of this text. Make it more polished, confident, and appropriate for business communication:"},{id:"extract-action-items",name:"Extract Action Items",description:"Identify and format action items and next steps from business content",category:"business",prompt:"Extract and clearly format all action items, next steps, and deliverables from this text. Present them as a bulleted list with responsible parties and deadlines where mentioned:"},{id:"format-meeting-notes",name:"Format Meeting Notes",description:"Structure and format meeting notes for clarity and actionability",category:"business",prompt:"Structure and format these meeting notes. Organize by agenda items, highlight decisions made, action items, and next steps:"},{id:"enhance-dialogue",name:"Enhance Dialogue",description:"Improve dialogue naturalness, character voice, and dramatic effect",category:"fiction",prompt:"Enhance this dialogue to make it more natural, distinctive to each character, and dramatically effective. Improve rhythm, subtext, and character voice:"},{id:"develop-character",name:"Develop Character",description:"Enhance character development and personality in narrative text",category:"fiction",prompt:"Enhance the character development in this text. Make the characters more vivid, complex, and distinctive through actions, dialogue, and internal thoughts:"},{id:"improve-narrative-flow",name:"Improve Narrative Flow",description:"Enhance pacing, transitions, and narrative momentum",category:"fiction",prompt:"Improve the narrative flow of this text. Enhance pacing, smooth transitions between scenes, and maintain reader engagement throughout:"},{id:"enhance-setting-description",name:"Enhance Setting Description",description:"Improve scene setting and atmospheric description",category:"fiction",prompt:"Enhance the setting description in this text. Make it more vivid and atmospheric while using sensory details to immerse the reader:"},{id:"improve-api-documentation",name:"Improve API Documentation",description:"Enhance API documentation clarity, completeness, and usability",category:"technical",prompt:"Improve this API documentation. Make it clearer, more complete, and easier to understand. Include proper parameter descriptions, examples, and error handling:"},{id:"enhance-code-comments",name:"Enhance Code Comments",description:"Improve code comments for clarity and maintainability",category:"technical",prompt:"Enhance these code comments to make them clearer and more helpful for future developers. Explain the why behind complex logic:"},{id:"create-technical-spec",name:"Create Technical Specification",description:"Generate comprehensive technical specifications from requirements",category:"technical",prompt:"Create a comprehensive technical specification from this content. Include system requirements, architecture decisions, and implementation details:"},{id:"improve-troubleshooting-guide",name:"Improve Troubleshooting Guide",description:"Enhance troubleshooting documentation with clear steps and solutions",category:"technical",prompt:"Improve this troubleshooting guide. Make the steps clearer, add common solutions, and organize by problem severity:"},{id:"improve-clarity",name:"Improve Clarity",description:"Enhance text clarity and readability",category:"academic",prompt:"Improve the clarity and readability of this text. Make it easier to understand while preserving the original meaning and tone:"},{id:"fix-grammar",name:"Fix Grammar",description:"Correct grammatical errors and improve sentence structure",category:"academic",prompt:"Fix any grammatical errors in this text and improve sentence structure while maintaining the original style and meaning:"},{id:"enhance-style",name:"Enhance Writing Style",description:"Improve overall writing style and flow",category:"academic",prompt:"Enhance the writing style of this text. Improve flow, vary sentence structure, and make it more engaging while maintaining appropriateness for the context:"},{id:"summarize",name:"Summarize",description:"Create a concise summary of the selected text",category:"academic",prompt:"Create a concise summary of this text. Capture the main points and key information in a shorter, more digestible format:"},{id:"expand-ideas",name:"Expand Ideas",description:"Develop and elaborate on ideas in the selected text",category:"academic",prompt:"Expand and elaborate on the ideas in this text. Add more depth, examples, and supporting details while maintaining coherence:"}]}getFunctions(t){let e=[...this.builtInFunctions,...this.plugin.settings.customFunctions];return t?e.filter(i=>i.category===t):e}getFunction(t){return[...this.builtInFunctions,...this.plugin.settings.customFunctions].find(i=>i.id===t)}async executeFunction(t,e,i){let n=this.getFunction(t);if(!n)throw new Error(`Function '${t}' not found`);return await this.executeWithPrompt(n.prompt,e,i)}async executeCustomPrompt(t,e){return await this.executeWithPrompt(e,t)}async executeWithPrompt(t,e,i){var n;if(!((n=window.WriterrlAPI)!=null&&n.chat))throw new Error("Writerr Chat plugin is required for AI editorial functions. Please install and configure the Writerr Chat plugin.");try{let o=this.buildFullPrompt(t,e,i),c=await this.sendToAI(o);return this.extractEditedText(c,e)}catch(o){throw console.error("Error executing editorial function:",o),new Error(`Failed to process text: ${o.message}`)}}buildFullPrompt(t,e,i){let n=t,o=this.plugin.getCurrentMode();if(o&&(n+=`

Context: This is ${o.name.toLowerCase()} writing. ${o.description}`),i&&Object.keys(i).length>0){n+=`

Additional parameters:`;for(let[c,s]of Object.entries(i))n+=`
- ${c}: ${s}`}return n+=`

Text to edit:

${e}

Please provide only the improved text without additional commentary.`,n}async sendToAI(t){throw await new Promise(e=>setTimeout(e,1e3)),new Error("AI provider not implemented yet. This is a placeholder for the actual AI integration.")}extractEditedText(t,e){return t.trim()}addCustomFunction(t){if(this.getFunction(t.id))throw new Error(`Function with ID '${t.id}' already exists`);this.plugin.settings.customFunctions.push(t),this.plugin.saveSettings()}removeCustomFunction(t){let e=this.plugin.settings.customFunctions.findIndex(i=>i.id===t);return e===-1?!1:(this.plugin.settings.customFunctions.splice(e,1),this.plugin.saveSettings(),!0)}getFunctionsByCurrentMode(){let t=this.plugin.getCurrentMode();if(!t)return this.getFunctions();let e=this.getFunctions(t.category),i=["improve-clarity","fix-grammar","enhance-style","summarize","expand-ideas"],n=this.builtInFunctions.filter(o=>i.includes(o.id));return[...e,...n]}};var f=class{constructor(t){this.plugin=t,this.initializeBuiltInModes()}initializeBuiltInModes(){this.builtInModes=[{id:"general",name:"General Writing",description:"General purpose writing with focus on clarity and readability",category:"academic",systemPrompt:"You are a helpful writing assistant focused on improving clarity, grammar, and overall readability. Maintain the author's voice and intent while making the text clearer and more engaging.",functions:[]},{id:"academic",name:"Academic Writing",description:"Scholarly writing with emphasis on argument structure, evidence, and formal tone",category:"academic",systemPrompt:"You are an academic writing specialist. Focus on improving argument structure, evidence presentation, citation integration, and maintaining appropriate scholarly tone. Ensure logical flow and rigorous analysis.",functions:[]},{id:"business",name:"Business Writing",description:"Professional communication with focus on clarity, action items, and business outcomes",category:"business",systemPrompt:"You are a business communication expert. Focus on professional tone, clear action items, executive-level clarity, and outcome-oriented language. Make content scannable and actionable.",functions:[]},{id:"fiction",name:"Fiction Writing",description:"Creative writing with emphasis on character development, dialogue, and narrative flow",category:"fiction",systemPrompt:"You are a fiction writing coach. Focus on character development, dialogue naturalness, narrative pacing, setting description, and reader engagement. Enhance dramatic effect and emotional impact.",functions:[]},{id:"technical",name:"Technical Writing",description:"Technical documentation with focus on accuracy, completeness, and user guidance",category:"technical",systemPrompt:"You are a technical writing specialist. Focus on accuracy, completeness, step-by-step clarity, and user-centered documentation. Ensure technical concepts are explained clearly for the target audience.",functions:[]}]}getModes(t){let e=[...this.builtInModes,...this.plugin.settings.customModes];return t?e.filter(i=>i.category===t):e}getMode(t){return[...this.builtInModes,...this.plugin.settings.customModes].find(i=>i.id===t)||null}getCurrentMode(){return this.getMode(this.plugin.settings.currentMode)}setMode(t){return this.getMode(t)?(this.plugin.settings.currentMode=t,this.plugin.saveSettings(),!0):!1}getModeSystemPrompt(t){let e=this.getMode(t);return e?e.systemPrompt:this.builtInModes[0].systemPrompt}getModeFunctions(t){let e=this.getMode(t);return e?this.plugin.functionManager.getFunctions(e.category):[]}addCustomMode(t){if(this.getMode(t.id))throw new Error(`Mode with ID '${t.id}' already exists`);this.plugin.settings.customModes.push(t),this.plugin.saveSettings()}removeCustomMode(t){if(this.builtInModes.some(i=>i.id===t))return!1;let e=this.plugin.settings.customModes.findIndex(i=>i.id===t);return e===-1?!1:(this.plugin.settings.customModes.splice(e,1),this.plugin.settings.currentMode===t&&(this.plugin.settings.currentMode="general"),this.plugin.saveSettings(),!0)}updateCustomMode(t,e){let i=this.plugin.settings.customModes.findIndex(o=>o.id===t);if(i===-1)return!1;let n=this.plugin.settings.customModes[i];return Object.assign(n,e),this.plugin.saveSettings(),!0}buildModeContext(t,e){let i=this.getMode(t);if(!i)return"";let n=`Current writing mode: ${i.name}
`;return n+=`Mode description: ${i.description}
`,n+=`System guidance: ${i.systemPrompt}`,e&&(n+=`

Additional context: ${e}`),n}getModeSuggestions(t){let e=this.getMode(t);if(!e)return[];let i={academic:["Focus on argument structure and evidence","Use formal, scholarly tone","Integrate citations smoothly","Ensure logical flow between paragraphs","Support claims with credible sources"],business:["Lead with key takeaways","Use action-oriented language","Make content scannable","Include clear next steps","Focus on business outcomes"],fiction:["Show don't tell","Develop character voice","Enhance sensory details","Improve dialogue naturalness","Maintain narrative momentum"],technical:["Be precise and accurate","Use clear step-by-step instructions","Include examples and code snippets","Consider the target audience","Test all procedures"],general:["Focus on clarity and readability","Use active voice when possible","Vary sentence structure","Remove unnecessary words","Improve flow and transitions"]};return i[e.category]||i.general}exportModeConfiguration(){let t={currentMode:this.plugin.settings.currentMode,customModes:this.plugin.settings.customModes,exportedAt:new Date().toISOString()};return JSON.stringify(t,null,2)}importModeConfiguration(t){try{let e=JSON.parse(t);if(!e.customModes||!Array.isArray(e.customModes))return{success:!1,message:"Invalid configuration format"};for(let n of e.customModes)if(!n.id||!n.name||!n.category||!n.systemPrompt)return{success:!1,message:"Invalid mode structure in configuration"};let i=0;for(let n of e.customModes)this.getMode(n.id)||(this.plugin.settings.customModes.push(n),i++);return e.currentMode&&this.getMode(e.currentMode)&&(this.plugin.settings.currentMode=e.currentMode),this.plugin.saveSettings(),{success:!0,message:`Successfully imported ${i} custom modes`}}catch(e){return{success:!1,message:`Import failed: ${e.message}`}}}};var W={currentMode:"general",enableQuickAccess:!0,showCategoryIcons:!0,autoApplyFormatting:!0,confirmBeforeApply:!0,customFunctions:[],customModes:[]},y=class extends a.Plugin{async onload(){await this.loadSettings(),this.functionManager=new h(this),this.modeManager=new f(this),this.initializeGlobalAPI(),this.addCommands(),this.registerContextMenus(),this.addRibbonIcon("wand-2","AI Editorial Functions",t=>{this.showFunctionMenu(t)}),this.statusBarItem=this.addStatusBarItem(),this.updateStatusBar(),this.addSettingTab(new p(this.app,this)),console.log("AI Editorial Functions plugin loaded")}onunload(){this.cleanupGlobalAPI(),console.log("AI Editorial Functions plugin unloaded")}async loadSettings(){this.settings=Object.assign({},W,await this.loadData())}async saveSettings(){await this.saveData(this.settings),this.updateStatusBar()}initializeGlobalAPI(){window.WriterrlAPI||(window.WriterrlAPI={}),window.WriterrlAPI.editorialFunctions={getFunctions:t=>this.functionManager.getFunctions(t),executeFunction:(t,e,i)=>this.functionManager.executeFunction(t,e,i),getModes:t=>this.modeManager.getModes(t),setMode:t=>this.setMode(t)}}cleanupGlobalAPI(){window.WriterrlAPI&&window.WriterrlAPI.editorialFunctions&&delete window.WriterrlAPI.editorialFunctions}addCommands(){this.addCommand({id:"switch-to-academic-mode",name:"Switch to Academic Writing Mode",callback:()=>this.setMode("academic")}),this.addCommand({id:"switch-to-business-mode",name:"Switch to Business Writing Mode",callback:()=>this.setMode("business")}),this.addCommand({id:"switch-to-fiction-mode",name:"Switch to Fiction Writing Mode",callback:()=>this.setMode("fiction")}),this.addCommand({id:"switch-to-technical-mode",name:"Switch to Technical Writing Mode",callback:()=>this.setMode("technical")}),this.addCommand({id:"show-function-menu",name:"Show editorial functions menu",editorCallback:(t,e)=>{this.showFunctionMenu()}}),this.addCommand({id:"quick-edit-selection",name:"Quick edit selected text",editorCallback:t=>{let e=t.getSelection();e?this.showQuickEditModal(e,t):new a.Notice("No text selected")}}),this.addCommand({id:"improve-clarity",name:"Improve clarity of selected text",editorCallback:t=>this.executeQuickFunction("improve-clarity",t)}),this.addCommand({id:"fix-grammar",name:"Fix grammar of selected text",editorCallback:t=>this.executeQuickFunction("fix-grammar",t)}),this.addCommand({id:"enhance-style",name:"Enhance writing style of selected text",editorCallback:t=>this.executeQuickFunction("enhance-style",t)}),this.addCommand({id:"summarize-text",name:"Summarize selected text",editorCallback:t=>this.executeQuickFunction("summarize",t)})}registerContextMenus(){this.registerEvent(this.app.workspace.on("editor-menu",(t,e,i)=>{if(e.getSelection()){t.addSeparator();let o=t.addItem(s=>{s.setTitle("AI Editorial Functions"),s.setIcon("wand-2")}),c=[{id:"improve-clarity",title:"Improve Clarity"},{id:"fix-grammar",title:"Fix Grammar"},{id:"enhance-style",title:"Enhance Style"},{id:"summarize",title:"Summarize"}];for(let s of c)o.addItem(l=>{l.setTitle(s.title),l.onClick(()=>this.executeQuickFunction(s.id,e))});o.addSeparator(),o.addItem(s=>{s.setTitle("More Functions..."),s.onClick(()=>this.showFunctionMenu())})}}))}async executeQuickFunction(t,e){let i=e.getSelection();if(!i){new a.Notice("No text selected");return}try{let n=await this.functionManager.executeFunction(t,i);this.settings.confirmBeforeApply?this.showResultModal(i,n,e):(e.replaceSelection(n),new a.Notice("Text updated"))}catch(n){new a.Notice(`Error: ${n.message}`)}}showFunctionMenu(t){new v(this.app,this,i=>{let n=this.getActiveEditor();n&&this.executeQuickFunction(i,n)}).open()}showQuickEditModal(t,e){new w(this.app,t,async n=>{try{let o=await this.functionManager.executeCustomPrompt(t,n);this.settings.confirmBeforeApply?this.showResultModal(t,o,e):(e.replaceSelection(o),new a.Notice("Text updated"))}catch(o){new a.Notice(`Error: ${o.message}`)}}).open()}showResultModal(t,e,i){new b(this.app,t,e,o=>{o&&(i.replaceSelection(e),new a.Notice("Text updated"))}).open()}getActiveEditor(){let t=this.app.workspace.getActiveViewOfType(a.MarkdownView);return t?t.editor:null}setMode(t){this.settings.currentMode=t,this.saveSettings(),new a.Notice(`Switched to ${t} writing mode`)}getCurrentMode(){return this.modeManager.getMode(this.settings.currentMode)}updateStatusBar(){let t=this.getCurrentMode();t?(this.statusBarItem.setText(`\u{1F4DD} ${t.name}`),this.statusBarItem.title=`Current writing mode: ${t.description}`):(this.statusBarItem.setText("\u{1F4DD} General"),this.statusBarItem.title="No specific writing mode selected")}},v=class extends a.Modal{constructor(t,e,i){super(t),this.plugin=e,this.onSelect=i}onOpen(){let{contentEl:t}=this;t.empty(),t.createEl("h2",{text:"AI Editorial Functions"});let e=this.plugin.functionManager.getFunctions(),i=["academic","business","fiction","technical"];for(let n of i){let o=e.filter(s=>s.category===n);if(o.length===0)continue;let c=t.createEl("div",{cls:"function-category"});c.createEl("h3",{text:n.charAt(0).toUpperCase()+n.slice(1)});for(let s of o){let l=c.createEl("div",{cls:"function-item"});l.style.cssText=`
          padding: 8px 12px;
          margin: 2px 0;
          border: 1px solid var(--background-modifier-border);
          border-radius: 4px;
          cursor: pointer;
          transition: background-color 0.2s;
        `,l.createEl("strong",{text:s.name}),l.createEl("div",{text:s.description,cls:"function-description"}),l.addEventListener("click",()=>{this.onSelect(s.id),this.close()}),l.addEventListener("mouseenter",()=>{l.style.backgroundColor="var(--background-modifier-hover)"}),l.addEventListener("mouseleave",()=>{l.style.backgroundColor=""})}}}onClose(){let{contentEl:t}=this;t.empty()}},w=class extends a.Modal{constructor(t,e,i){super(t),this.selectedText=e,this.onSubmit=i}onOpen(){let{contentEl:t}=this;t.empty(),t.createEl("h2",{text:"Quick Edit with Custom Prompt"});let e=t.createEl("div",{cls:"selected-text-preview"});e.style.cssText=`
      background: var(--background-secondary);
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      max-height: 150px;
      overflow-y: auto;
    `,e.textContent=this.selectedText;let i=t.createEl("textarea",{attr:{placeholder:'Enter your editing instructions (e.g., "Make this more formal", "Simplify the language", "Add more details")',rows:"3"}});i.style.cssText=`
      width: 100%;
      margin: 10px 0;
      padding: 8px;
      border: 1px solid var(--background-modifier-border);
      border-radius: 4px;
    `;let n=t.createEl("div",{cls:"button-container"});n.style.cssText=`
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 15px;
    `;let o=n.createEl("button",{text:"Cancel"});o.onclick=()=>this.close();let c=n.createEl("button",{text:"Apply Edit"});c.style.cssText=`
      background: var(--interactive-accent);
      color: var(--text-on-accent);
    `,c.onclick=async()=>{let s=i.value.trim();s&&(this.close(),await this.onSubmit(s))},i.focus()}onClose(){let{contentEl:t}=this;t.empty()}},b=class extends a.Modal{constructor(t,e,i,n){super(t),this.originalText=e,this.editedText=i,this.onDecision=n}onOpen(){let{contentEl:t}=this;t.empty(),t.createEl("h2",{text:"Preview Changes"});let e=t.createEl("div",{cls:"diff-container"});e.style.cssText=`
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 15px 0;
    `;let i=e.createEl("div");i.createEl("h3",{text:"Original"});let n=i.createEl("div",{cls:"text-preview original"});n.style.cssText=`
      background: var(--background-secondary);
      padding: 15px;
      border-radius: 4px;
      max-height: 300px;
      overflow-y: auto;
      border: 2px solid var(--background-modifier-error);
    `,n.textContent=this.originalText;let o=e.createEl("div");o.createEl("h3",{text:"Edited"});let c=o.createEl("div",{cls:"text-preview edited"});c.style.cssText=`
      background: var(--background-secondary);
      padding: 15px;
      border-radius: 4px;
      max-height: 300px;
      overflow-y: auto;
      border: 2px solid var(--background-modifier-success);
    `,c.textContent=this.editedText;let s=t.createEl("div",{cls:"button-container"});s.style.cssText=`
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
    `;let l=s.createEl("button",{text:"Keep Original"});l.onclick=()=>{this.onDecision(!1),this.close()};let g=s.createEl("button",{text:"Apply Changes"});g.style.cssText=`
      background: var(--interactive-accent);
      color: var(--text-on-accent);
    `,g.onclick=()=>{this.onDecision(!0),this.close()}}onClose(){let{contentEl:t}=this;t.empty()}};
